<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" th:href="@{/plugins/font-awesome/4.7.0/css/font-awesome.min.css}" media="all" />
		<link rel="stylesheet" th:href="@{/plugins/layui/2.4.5/css/layui.css}" media="all" />
		<link rel="stylesheet" th:href="@{/css/public.css}" media="all" />
	</head>

	<body class="childrenBody">
		<div class="layui-row search-div" style="margin: 10px;padding: 10px;">
			<form class="layui-form" action="">
				编码：
				<div class="layui-inline">
					<input class="layui-input" name="code" id="code" autocomplete="off">
				</div>
				姓名：
				<div class="layui-inline">
					<input class="layui-input" name="name" id="name" autocomplete="off">
				</div>
				类型：
				<div class="layui-inline">
					<select id="type" name="type">
						<option value="">请选择</option>
						<option value="">管理员</option>
						<option value="">系统管理员</option>
					</select>
				</div>
				状态：
				<div class="layui-inline">
					<select name="status" id="status">
						<option value="">请选择</option>
						<option value="">正常</option>
						<option value="">已注销</option>
					</select>
				</div>
				<button class="layui-btn" data-type="reload">搜索</button>
			</form>
		</div>
		<div class="layui-row">
			<table class="layui-hide" id="data" lay-filter="data"></table>
		</div>
	</body>
	<script type="text/html" id="toolbar">
		<div class="layui-btn-container">
			<button class="layui-btn layui-btn-sm" lay-event="insert">添加</button>
		</div>
	</script>
	<script type="text/html" id="fieldBar">
		<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
		<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
	</script>
	<script th:src="@{/plugins/layui/2.4.5/layui.js}"></script>
	<script>
		layui.use('table', function() {
			var table = layui.table;
			table.render({
				elem: '#data',
				url: 'data/admin.json',
				toolbar: '#toolbar',
				cols: [
					[{
						field: 'code',
						title: '编码',
						sort: true
					}, {
						field: 'name',
						title: '名称',
						sort: true
					}, {
						field: 'type',
						title: '类型',
						align: 'center',
						sort: true
					}, {
						field: 'status',
						title: '状态',
						align: 'center',
						sort: true
					}, {
						field: 'createUser',
						title: '创建人',
						align: 'center',
						sort: true
					}, {
						field: 'createTime',
						title: '创建时间',
						align: 'center',
						sort: true
					}, {
						field: 'updateUser',
						title: '修改人',
						align: 'center',
						sort: true
					}, {
						field: 'updateTime',
						title: '修改时间',
						align: 'center',
						sort: true
					}, {
						fixed: 'right',
						title: '操作',
						toolbar: '#fieldBar'
					}]
				],
				response: {
					statusName: 'code', //规定数据状态的字段名称，默认：code
					statusCode: 200, //规定成功的状态码，默认：0
					msgName: 'msg', //规定状态信息的字段名称，默认：msg
					countName: 'total', //规定数据总数的字段名称，默认：count
					dataName: 'data' //规定数据列表的字段名称，默认：data
				},
				page: true
			});
			//头工具栏事件
			table.on('toolbar(data)', function(obj) {
				var checkStatus = table.checkStatus(obj.config.id);
				switch(obj.event) {
					case 'insert':
						layer.open({
							type: 2,
							title: "添加商品",
							content: 'html/system/admin/add.html',
							area: ['460px', '330px']
						});
						break;
				};
			});

			//监听行工具事件
			table.on('tool(data)', function(obj) {
				var data = obj.data;
				console.log(JSON.stringify(data));
				if(obj.event === 'del') {
					layer.confirm('真的删除行么', function(index) {
						obj.del();
						layer.close(index);
					});
				} else if(obj.event === 'edit') {
					layer.open({
						type: 2,
						title: "编辑商品",
						content: 'html/system/admin/edit.html',
						area: ['460px', '330px']
					});
				}
			});
		});
	</script>

</html>